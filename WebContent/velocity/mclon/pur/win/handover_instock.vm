#*
<table class="title">
	<tr><td>入库统计#if($!form.message)[<font color='red'>$!form.message</font>]#end</td></tr>
</table>
*#
<table class='list'>
	<thead>
		<tr>
			<th colspan="5" rowspan="1">&nbsp;</th>
			<th colspan="4">
				<div align="center">入库单</div>
			</th>
			<th colspan="4"><div align="center">已入库</div></th>
			<th><div align="center">磅差</div></th>
		</tr>
		<tr>
            <th>大类</th>
            <th>计量<br>单位</th>
            <th>分析范围</th>
			<th>数量/重量</th>
    		<th>不合格<br>数量/<br>重量</th>
			<th>数量</th>
			<th>重量</th>
			<th>粒数</th>
			<th>件数</th>
			<th>数量</th>
			<th>重量</th>
			<th>粒数</th>
			<th>件数</th>
			<th>重量<br>/数量<br>/粒数</th>
        </tr>
    </thead>
    <tbody id="tbl">
	#foreach($map in $form.instockList)
		#if("$map.itemClassId" == "156" && $map.children && $map.children.size()>0)
			#foreach($child in $map.children)
				<tr>
    				#if("$!map.unitId" == "J")
        				#set($stockNum_child = $!child.stockAllCount)
        			#elseif("$!map.unitId" == "CT")
        				#set($stockNum_child = $!child.stockAllGrain)
        			#else
        				#set($stockNum_child = $!child.stockAllWeight)
        			#end
        			#set($noInStockNum_child = $child.num - $!child.noNum - $!stockNum_child)
        			<td>$!child.itemClassName</td>
        			<td style="color:blue;">$!child.unitName</td>
					<td>$!child.analysisName</td>
                    <td>$!child.num</td>
        			<td>$!child.noNum</td>
        			<td>$!child.stockAllNum</td>
        			<td>$!child.stockAllWeight</td>
        			<td>$!child.stockAllGrain</td>
        			<td>$!child.stockAllCount</td>
        			<td>$!child.stockNum</td>
        			<td>$!child.stockWeight</td>
        			<td>$!child.stockGrain</td>
        			<td>$!child.stockCount</td>
        			<td style="color:red;">#if($!noInStockNum_child!=0)$!StringUtil.formatDouble($!noInStockNum_child, 4)#end</td>
				</tr>
			#end
		#else
			<tr>
    			#if("$!map.unitId" == "J")
    				#set($stockNum = $!map.stockAllCount)
    			#elseif("$!map.unitId" == "CT")
    				#set($stockNum = $!map.stockAllGrain)
    			#else
    				#set($stockNum = $!map.stockAllWeight)
    			#end
    			#set($noInStockNum = $map.num - $!map.noNum - $!stockNum)
    			<td>$!map.itemClassName</td>
    			<td style="color:blue;">$!map.unitName</td>
    			<td>$!map.analysisName</td>
                <td>$!map.num</td>
    			<td>$!map.noNum</td>
    			<td>$!map.stockAllNum</td>
    			<td>$!map.stockAllWeight</td>
    			<td>$!map.stockAllGrain</td>
    			<td>$!map.stockAllCount</td>
    			<td>$!map.stockNum</td>
    			<td>$!map.stockWeight</td>
    			<td>$!map.stockGrain</td>
    			<td>$!map.stockCount</td>
    			<td  style="color:red;">#if($noInStockNum!=0)$!StringUtil.formatDouble($!noInStockNum, 4)#end</td>
    		</tr>
		#end
	#end
	</tbody>
</table>
	
<script >
	altRowCSS('tbl');
</script>