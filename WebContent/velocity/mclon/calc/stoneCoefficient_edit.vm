#set($jsfiles = ["$StringUtil.getContextPath()/js/calc/stoneCoefficient.js", "$StringUtil.getContextPath()/dwr/interface/StoneCoefficientDwr.js"])

<form id='frm' action="" method="post">
	<input type="hidden" id="id" value="$!{form.sc.id}"/>
    <table class="title">
    	<tr><td>宝石系数</td></tr>
    </table>
    <table class="control">
    	<tr><td>
				<input type='button' value='保存' class='btn' id='btnSave' $RightUtil.able($session, '08060502','1')>
				<input type='button' value='返回列表' class='btn' id="btnToList">
		</td></tr>
    </table>
    <table class='content'>
    	<tr>
			<td class='body1'>大类</td>	<td class='body2'>
            <select id="itemClassId" dataType="Require" msg="不能为空">$StringUtil.emptyOption()</select>$StringUtil.star()</td>
		</tr>
		<tr>
			<td class='body1'>形状</td>	
			<td class='body2'>
				<select id="mainShapeId" dataType="Require" msg="不能为空">$StringUtil.emptyOption()</select>$StringUtil.star()</td>
			</td>
		</tr>
		<tr>
			<td class='body1'>颜色</td>
			<td class='body2'>
				<select id="colorId" dataType="Require" msg="不能为空">$StringUtil.emptyOption()</select>$StringUtil.star()</td>
		</tr>
			<td class='body1'>色级</td><td class='body2'>
				<select id="colorGreadId" dataType="Require" msg="不能为空">$StringUtil.emptyOption()</select>$StringUtil.star()</td>
		</tr>
		<tr>
			<td class='body1'>净度</td><td class='body2'>
				<select id="cleanId" dataType="Require" msg="不能为空">$StringUtil.emptyOption()</select>$StringUtil.star()</td>
		</tr>
		<tr>
			<td class='body1'>规格</td><td class='body2'>
				<input type='text' id='styleStandard' dataType="Require" msg="不能为空" value="$!{form.sc.styleStandard}">$StringUtil.star()</td>
		</tr>
		<tr>			
			<td class='body1'>系数</td><td class='body2'>
				<input type='text' id='coefficient' dataType="Require" msg="不能为空" value="$!{form.sc.coefficient}">$StringUtil.star()</td>
		</tr>
    </table>
</form>

<script>
function setPageContent(){
	BdCommonDwr.getAllItemClassForSlt(function(data){
		addOptions("itemClassId", data, null, null, true, true);
	});
}
function setValues(){
	BdCommonDwr.getAllItemClassForSlt(function(data){
		addOptions("itemClassId", data, null, null, true, true,"$!{form.sc.itemClassId}");
	});
}
jQuery(function(){
	jQuery("#btnSave").click(function(){
    	saveStoneCoefficient();
	});
	jQuery("#btnToList").click(function(){
		window.location = "stoneCoefficient.vm";
	});
	if("$!form.sc.id"){
		setValues();
	}else{
		setPageContent();
	}
	DictDwr.getDictsForSlt("diashape", function(data){
		addOptions("mainShapeId", data);
		if("$!form.sc.id"){
			selectOption("mainShapeId", "$!{form.sc.mainShapeId}");
		}
	});
	DictDwr.getDictsForSlt("diaclean", function(data){
		addOptions("cleanId", data);
		if("$!form.sc.id"){
			selectOption("cleanId", "$!{form.sc.cleanId}");
		}
	});
	DictDwr.getDictsForSlt("diacolorgrade", function(data){
		addOptions("colorGreadId", data);
		if("$!form.sc.id"){
			selectOption("colorGreadId", "$!{form.sc.colorGreadId}");
		}
	});
	DictDwr.getDictsForSlt("diacolor", function(data){
		addOptions("colorId", data);
		if("$!form.sc.id"){
			selectOption("colorId", "$!{form.sc.colorId}");
		}
	});
	
});


</script>